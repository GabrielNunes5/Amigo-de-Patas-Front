import{$ as N,$a as c,Bc as X,Cb as q,Cc as y,Da as S,Fc as W,Ga as E,Gc as J,Ic as _,Jc as K,Kc as Q,Lc as Y,Mc as Z,Na as d,Nc as ee,Oc as te,Pc as ie,Q as v,Qa as I,Qc as ne,Rc as ae,Sa as h,Sc as oe,Ta as M,Uc as re,Va as T,W as g,Wa as k,Wc as le,X as f,Xa as t,Xb as G,Xc as me,Ya as i,Za as s,_a as w,ab as p,bb as n,cb as P,db as b,ea as A,fa as C,ha as x,ic as z,jb as O,kc as L,nc as R,qb as j,ra as V,tc as U,ua as l,uc as $,xc as B,yc as H,zc as F}from"./chunk-ASBZGUJP.js";var ge=()=>[1,2,3,4,5],fe=(m,a)=>a.animalId;function xe(m,a){m&1&&(t(0,"tr")(1,"td",25)(2,"div",26)(3,"span"),n(4,"Carregando..."),i()()()())}function be(m,a){m&1&&T(0,xe,5,0,"tr",null,M),m&2&&k(O(0,ge))}function _e(m,a){if(m&1&&(t(0,"tr")(1,"td",27)(2,"div"),s(3,"lucide-angular",28),t(4,"p"),n(5,"Nenhum animal encontrado"),i()()()()),m&2){let e=p();l(3),d("img",e.Heart)}}function ve(m,a){if(m&1){let e=w();t(0,"tr",29)(1,"td",30),s(2,"img",31),i(),t(3,"td",30)(4,"span",32),n(5),i()(),t(6,"td",30)(7,"span",33)(8,"span"),n(9),i(),t(10,"span",34),n(11),i()()(),t(12,"td",35),n(13),i(),t(14,"td",35),n(15),i(),t(16,"td",35),n(17),i(),t(18,"td",30)(19,"span"),n(20),i()(),t(21,"td",36)(22,"div",37)(23,"button",38),c("click",function(){let r=g(e).$implicit,u=p(2);return f(u.openEditForm(r))}),s(24,"lucide-angular",39),i(),t(25,"button",40),c("click",function(){let r=g(e).$implicit,u=p(2);return f(u.openDeleteDialog(r))}),s(26,"lucide-angular",39),i()()()()}if(m&2){let e=a.$implicit,o=p(2);l(2),d("src",e.animalImageUrl,V)("alt","Foto de "+e.animalName),l(3),b(" ",e.animalName," "),l(4),b(" ",e.animalSpecies==="Cachorro"?"\u{1F415}":"\u{1F431}"," "),l(2),b(" ",e.animalSpecies," "),l(2),b(" ",e.animalAge," "),l(2),b(" ",e.animalSex," "),l(2),b(" ",e.animalSize," "),l(2),I(o.getStatusColor(e.animalAdopted)+" px-2.5 py-0.5 rounded-full text-xs font-medium"),l(),b(" ",e.animalAdopted?"Adotado":"Dispon\xEDvel"," "),l(4),d("img",o.Pencil),l(2),d("img",o.Trash)}}function he(m,a){if(m&1&&T(0,ve,27,13,"tr",29,fe),m&2){let e=p();k(e.filteredAnimais())}}function ye(m,a){if(m&1&&(t(0,"span",54),n(1),i()),m&2){let e=p(2);l(),P(e.getFieldError("animalName"))}}function Ae(m,a){if(m&1){let e=w();t(0,"div",41),c("click",function(){g(e);let r=p();return f(!r.saving()&&r.closeForm())}),t(1,"div",42),c("click",function(r){return g(e),f(r.stopPropagation())}),t(2,"div",2)(3,"div",43)(4,"div",44),s(5,"lucide-angular",45),t(6,"h2",46),n(7),i()(),t(8,"button",47),c("click",function(){g(e);let r=p();return f(!r.saving()&&r.closeForm())}),s(9,"lucide-angular",48),i()(),t(10,"form",49),c("ngSubmit",function(){g(e);let r=p();return f(r.handleSubmit())}),t(11,"div",50)(12,"div")(13,"label",51),n(14," Nome "),t(15,"span",52),n(16,"*"),i()(),s(17,"input",53),E(18,ye,2,1,"span",54),i(),t(19,"div")(20,"label",55),n(21," Tipo "),t(22,"span",52),n(23,"*"),i()(),t(24,"select",56)(25,"option",11),n(26,"\u{1F415} Cachorro"),i(),t(27,"option",12),n(28,"\u{1F431} Gato"),i()()(),t(29,"div")(30,"label",57),n(31," Idade "),t(32,"span",52),n(33,"*"),i()(),s(34,"input",58),i(),t(35,"div")(36,"label",59),n(37," Sexo "),t(38,"span",52),n(39,"*"),i()(),t(40,"select",60)(41,"option",61),n(42,"Macho"),i(),t(43,"option",62),n(44,"F\xEAmea"),i()()(),t(45,"div")(46,"label",63),n(47," Peso (kg) "),t(48,"span",52),n(49,"*"),i()(),s(50,"input",64),i(),t(51,"div")(52,"label",65),n(53," Porte "),t(54,"span",52),n(55,"*"),i()(),t(56,"select",66)(57,"option",67),n(58,"Pequeno"),i(),t(59,"option",68),n(60,"M\xE9dio"),i(),t(61,"option",69),n(62,"Grande"),i()()(),t(63,"div")(64,"label",70),n(65,"Cor"),i(),s(66,"input",71),i(),t(67,"div")(68,"label",72),n(69,"Status"),i(),t(70,"select",73)(71,"option",74),n(72,"Dispon\xEDvel"),i(),t(73,"option",74),n(74,"Adotado"),i()()()(),t(75,"div")(76,"label",75),n(77," URL da Foto "),t(78,"span",52),n(79,"*"),i()(),s(80,"input",76),i(),t(81,"div")(82,"label",77),n(83,"Vacinas"),i(),s(84,"input",78),i(),t(85,"div")(86,"label",79),n(87,"Condi\xE7\xF5es Especiais"),i(),s(88,"textarea",80),i(),t(89,"div",81),s(90,"input",82),t(91,"label",83),n(92,"Castrado"),i()(),t(93,"div",84)(94,"button",85),c("click",function(){g(e);let r=p();return f(!r.saving()&&r.closeForm())}),n(95," Cancelar "),i(),t(96,"button",86),n(97),i()()()()()()}if(m&2){let e=p();l(5),d("img",e.selectedAnimal()?e.Pencil:e.Plus),l(2),b(" ",e.selectedAnimal()?"Editar Animal":"Novo Animal"," "),l(2),d("img",e.X),l(),d("formGroup",e.animalForm),l(8),h(e.isFieldInvalid("animalName")?18:-1),l(53),d("ngValue",!1),l(2),d("ngValue",!0),l(23),d("disabled",e.animalForm.invalid||e.saving()),l(),b(" ",e.saving()?"Salvando...":e.selectedAnimal()?"Atualizar":"Criar"," ")}}function Ce(m,a){if(m&1){let e=w();t(0,"div",41),c("click",function(){g(e);let r=p();return f(r.closeDeleteDialog())}),t(1,"div",87),c("click",function(r){return g(e),f(r.stopPropagation())}),t(2,"div",2)(3,"div",88)(4,"div",89),s(5,"lucide-angular",90),i(),t(6,"div",91)(7,"h2",92),n(8,"Confirmar Exclus\xE3o"),i(),t(9,"p",93),n(10," Tem certeza que deseja excluir o animal "),t(11,"strong"),n(12),i(),n(13,"? Esta a\xE7\xE3o n\xE3o pode ser desfeita. "),i()()()(),t(14,"div",94)(15,"button",85),c("click",function(){g(e);let r=p();return f(r.closeDeleteDialog())}),n(16," Cancelar "),i(),t(17,"button",95),c("click",function(){g(e);let r=p();return f(r.handleDelete())}),n(18," Excluir "),i()()()()}if(m&2){let e,o=p();l(5),d("img",o.TriangleAlert),l(7),b('"',(e=o.selectedAnimal())==null?null:e.animalName,'"')}}var D=class m{fb=v(re);Search=R;Plus=L;X=B;Heart=G;Trash=U;Pencil=z;TriangleAlert=$;animais=C([]);loading=C(!1);saving=C(!1);create=A();update=A();delete=A();searchTerm=x("");filterStatus=x("todos");filterTipo=x("todos");isFormOpen=x(!1);isDeleteOpen=x(!1);selectedAnimal=x(null);animalForm=this.createAnimalForm();filteredAnimais=j(()=>{let a=this.searchTerm().trim().toLowerCase(),e=this.filterStatus(),o=this.filterTipo();return this.animais().filter(r=>{let u=!a||r.animalName.toLowerCase().includes(a),se=o==="todos"||r.animalSpecies?.toLowerCase()===o.toLowerCase(),ce=e==="todos"||e==="Adotado"&&r.animalAdopted||e==="Dispon\xEDvel"&&!r.animalAdopted;return u&&se&&ce})});createAnimalForm(){return this.fb.group({animalName:["",[_.required,_.minLength(3)]],animalSpecies:["",_.required],animalAge:["",_.required],animalSex:["",_.required],animalSize:["",_.required],animalWeight:[1,[_.required,_.min(1)]],animalColor:[""],animalSpecialConditions:[""],animalImageUrl:["",_.required],animalAdopted:[!1],animalNeutered:[!1],animalVaccines:[""]})}getStatusColor(a){return a?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}onSearchChange(a){this.searchTerm.set(a)}onFilterStatusChange(a){this.filterStatus.set(a)}onFilterTipoChange(a){this.filterTipo.set(a)}openNewForm(){this.selectedAnimal.set(null),this.animalForm.reset({animalAdopted:!1,animalNeutered:!1}),this.isFormOpen.set(!0)}openEditForm(a){this.selectedAnimal.set(a),this.animalForm.patchValue(a),this.isFormOpen.set(!0)}openDeleteDialog(a){this.selectedAnimal.set(a),this.isDeleteOpen.set(!0)}closeForm(){this.isFormOpen.set(!1),this.selectedAnimal.set(null),this.animalForm.reset({animalAdopted:!1,animalNeutered:!1})}closeDeleteDialog(){this.isDeleteOpen.set(!1),this.selectedAnimal.set(null)}handleSubmit(){if(this.animalForm.invalid){this.animalForm.markAllAsTouched();return}let a=this.animalForm.value,e=this.selectedAnimal();e?this.update.emit({id:e.animalId,data:a}):this.create.emit(a),this.closeForm()}handleDelete(){let a=this.selectedAnimal();a&&(this.delete.emit(a.animalId),this.closeDeleteDialog())}trackByAnimalId(a,e){return e.animalId}isFieldInvalid(a){let e=this.animalForm.get(a);return!!(e?.invalid&&(e.dirty||e.touched))}getFieldError(a){let e=this.animalForm.get(a);return e?.errors?e.errors.required?"Campo obrigat\xF3rio":e.errors.minlength?`M\xEDnimo ${e.errors.minlength.requiredLength} caracteres`:e.errors.min?"Valor inv\xE1lido":"Campo inv\xE1lido":""}static \u0275fac=function(e){return new(e||m)};static \u0275cmp=S({type:m,selectors:[["app-admin-animais"]],inputs:{animais:[1,"animais"],loading:[1,"loading"],saving:[1,"saving"]},outputs:{create:"create",update:"update",delete:"delete"},decls:54,vars:8,consts:[[1,"space-y-6","p-4"],[1,"border-none","shadow-lg","rounded-xl","bg-white"],[1,"p-6"],[1,"flex","flex-col","md:flex-row","gap-4","justify-between","items-start","md:items-center"],[1,"flex","flex-col","sm:flex-row","gap-4","flex-1"],[1,"relative","flex-1"],[1,"absolute","left-2","top-1/2","transform","-translate-y-1/2","text-gray-400","w-4","h-4",3,"img"],["type","search","placeholder","Buscar por nome...",1,"pl-10","w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"w-full","sm:w-40"],[1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["value","todos"],["value","Cachorro"],["value","Gato"],["value","Dispon\xEDvel"],["value","Adotado"],["type","button",1,"bg-gradient-to-r","from-blue-600","to-green-600","text-white","px-4","py-2","rounded-md","flex","items-center","hover:opacity-90","transition-opacity","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2",3,"click"],[1,"w-4","h-4","mr-2",3,"img"],[1,"border-none","shadow-lg","rounded-xl","overflow-hidden"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-300"],[1,"bg-gray-50"],["scope","col",1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],["scope","col",1,"px-6","py-3","text-right","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-300"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","p-4","bg-black/60"],["colspan","8",1,"px-6","py-4"],[1,"h-12","bg-gray-100","animate-pulse","rounded"],["colspan","8",1,"px-6","py-8","text-center","text-gray-500"],[1,"w-12","h-12","mx-auto","mb-2","text-gray-300",3,"img"],[1,"hover:bg-gray-300","transition-colors"],[1,"px-6","py-4","whitespace-nowrap"],["loading","lazy",1,"w-14","h-14","rounded-lg","object-cover",3,"src","alt"],[1,"font-medium","text-gray-900"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","border","border-gray-300","bg-gray-50"],[1,"ml-1"],[1,"px-6","py-4","whitespace-nowrap","text-gray-700"],[1,"px-6","py-4","whitespace-nowrap","text-right"],[1,"flex","justify-end","gap-2"],["type","button","title","Editar",1,"p-2","border","border-gray-300","rounded-md","hover:bg-gray-50","focus:ring-2","focus:outline-none","focus:ring-blue-500","transition-colors",3,"click"],[1,"w-4","h-4",3,"img"],["type","button","title","Excluir",1,"p-2","border","border-gray-300","rounded-md","text-red-600","hover:text-red-700","hover:bg-red-50","focus:outline-none","focus:ring-2","focus:ring-red-500","transition-colors",3,"click"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","p-4","bg-black/60",3,"click"],[1,"bg-white","rounded-lg","shadow-xl","w-full","max-w-2xl","max-h-[90vh]","overflow-y-auto",3,"click"],[1,"flex","items-center","justify-between","mb-6"],[1,"flex","items-center","gap-2"],[1,"w-6","h-6","text-gray-600",3,"img"],[1,"text-lg","font-medium","text-gray-900"],["type","button",1,"text-gray-400","hover:text-gray-600",3,"click"],[1,"w-6","h-6",3,"img"],["novalidate","",1,"space-y-6",3,"ngSubmit","formGroup"],[1,"grid","md:grid-cols-2","gap-4"],["for","nome",1,"text-sm","font-medium","mb-1","block","text-gray-700"],[1,"text-red-500"],["id","nome","type","text","formControlName","animalName","placeholder","Nome do animal",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500"],[1,"text-red-500","text-sm"],["for","tipo",1,"text-sm","font-medium","mb-1","block","text-gray-700"],["id","tipo","formControlName","animalSpecies",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["for","idade",1,"text-sm","font-medium","mb-1","block","text-gray-700"],["id","idade","type","text","formControlName","animalAge","placeholder","Ex: 2 anos",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["for","sexo",1,"text-sm","font-medium","mb-1","block","text-gray-700"],["id","sexo","formControlName","animalSex",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["value","Macho"],["value","F\xEAmea"],["for","peso",1,"text-sm","font-medium","mb-1","block","text-gray-700"],["id","peso","type","number","formControlName","animalWeight","placeholder","Ex: 12.5","step","0.1",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["for","porte",1,"text-sm","font-medium","mb-1","block","text-gray-700"],["id","porte","formControlName","animalSize",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["value","Pequeno"],["value","M\xE9dio"],["value","Grande"],["for","cor",1,"text-sm","font-medium","mb-1","block","text-gray-700"],["id","cor","type","text","formControlName","animalColor","placeholder","Ex: Marrom",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["for","status",1,"text-sm","font-medium","mb-1","block","text-gray-700"],["id","status","formControlName","animalAdopted",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500"],[3,"ngValue"],["for","foto-url",1,"text-sm","font-medium","mb-1","block","text-gray-700"],["id","foto-url","type","url","formControlName","animalImageUrl","placeholder","https://exemplo.com/foto.jpg",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["for","vacinas",1,"text-sm","font-medium","mb-1","block","text-gray-700"],["id","vacinas","type","text","formControlName","animalVaccines","placeholder","Ex: Antirr\xE1bica, V10",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["for","necessidades",1,"text-sm","font-medium","mb-1","block","text-gray-700"],["id","necessidades","formControlName","animalSpecialConditions","placeholder","Algum cuidado especial?","rows","2",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500"],[1,"flex","items-center","space-x-2"],["type","checkbox","id","castrado","formControlName","animalNeutered",1,"w-4","h-4","text-blue-600","border-gray-300","rounded","focus:ring-blue-500"],["for","castrado",1,"text-sm","font-medium","text-gray-700"],[1,"flex","justify-end","gap-3","pt-4","border-t","border-gray-200"],["type","button",1,"px-4","py-2","border","border-gray-300","rounded-md","hover:bg-gray-50","transition-colors",3,"click"],["type","submit",1,"bg-gradient-to-r","from-blue-600","to-green-600","text-white","px-4","py-2","rounded-md","hover:opacity-90","disabled:opacity-50","transition-opacity",3,"disabled"],[1,"bg-white","rounded-lg","shadow-xl","w-full","max-w-md",3,"click"],[1,"flex","items-start","gap-4"],[1,"w-12","h-12","rounded-full","bg-red-00","flex","items-center","justify-center"],[1,"w-8","h-8","text-red-600",3,"img"],[1,"flex-1"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-sm","text-gray-500"],[1,"bg-gray-50","px-6","py-3","flex","justify-end","gap-3"],["type","button",1,"px-4","py-2","bg-red-600","text-white","rounded-md","hover:bg-red-700","transition-colors",3,"click"]],template:function(e,o){e&1&&(t(0,"main",0)(1,"section",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),s(6,"lucide-angular",6),t(7,"input",7),c("ngModelChange",function(u){return o.onSearchChange(u)}),i()(),t(8,"div",8)(9,"select",9),c("ngModelChange",function(u){return o.onFilterTipoChange(u)}),t(10,"option",10),n(11,"Todos os tipos"),i(),t(12,"option",11),n(13,"\u{1F415} Cachorros"),i(),t(14,"option",12),n(15,"\u{1F431} Gatos"),i()()(),t(16,"div",8)(17,"select",9),c("ngModelChange",function(u){return o.onFilterStatusChange(u)}),t(18,"option",10),n(19,"Todos"),i(),t(20,"option",13),n(21,"Dispon\xEDveis"),i(),t(22,"option",14),n(23,"Adotados"),i()()()(),t(24,"button",15),c("click",function(){return o.openNewForm()}),s(25,"lucide-angular",16),n(26," Novo Animal "),i()()()(),t(27,"section",17)(28,"div",18)(29,"table",19)(30,"thead",20)(31,"tr")(32,"th",21),n(33," Foto "),i(),t(34,"th",21),n(35," Nome "),i(),t(36,"th",21),n(37," Tipo "),i(),t(38,"th",21),n(39," Idade "),i(),t(40,"th",21),n(41," Sexo "),i(),t(42,"th",21),n(43," Porte "),i(),t(44,"th",21),n(45," Status "),i(),t(46,"th",22),n(47," A\xE7\xF5es "),i()()(),t(48,"tbody",23),E(49,be,2,1)(50,_e,6,1,"tr")(51,he,2,0),i()()()()(),E(52,Ae,98,9,"div",24)(53,Ce,19,2,"div",24)),e&2&&(l(6),d("img",o.Search),l(),d("ngModel",o.searchTerm()),l(2),d("ngModel",o.filterTipo()),l(8),d("ngModel",o.filterStatus()),l(8),d("img",o.Plus),l(24),h(o.loading()?49:o.filteredAnimais().length===0?50:51),l(3),h(o.isFormOpen()?52:-1),l(),h(o.isDeleteOpen()?53:-1))},dependencies:[q,me,Z,ae,oe,J,ee,W,ne,K,Q,te,ie,F,H,le,Y],encapsulation:2})};var de=class m{animalService=v(X);destroyRef=v(N);loading=x(!1);saving=x(!1);animais=x([]);ngOnInit(){this.loadAnimais()}loadAnimais(){this.loading.set(!0),this.animalService.getAnimals().pipe(y(this.destroyRef)).subscribe({next:a=>this.animais.set(a),error:a=>{console.error("Erro ao carregar animais",a),this.animais.set([])},complete:()=>this.loading.set(!1)})}createAnimal(a){this.saving.set(!0),this.animalService.createAnimal(a).pipe(y(this.destroyRef)).subscribe({next:e=>{this.animais.update(o=>[...o,e])},error:e=>{console.error("Erro ao criar animal",e)},complete:()=>this.saving.set(!1)})}deleteAnimal(a){this.saving.set(!0),this.animalService.deleteAnimal(a).pipe(y(this.destroyRef)).subscribe({next:()=>{this.animais.update(e=>e.filter(o=>o.animalId!==a))},error:e=>{console.error("Erro ao deletar animal",e)},complete:()=>this.saving.set(!1)})}updateAnimal(a){this.saving.set(!0),this.animalService.updateAnimal(a.id,a.data).pipe(y(this.destroyRef)).subscribe({next:e=>{this.animais.update(o=>o.map(r=>r.animalId===e.animalId?e:r))},error:e=>{console.error("Erro ao atualizar animal",e)},complete:()=>this.saving.set(!1)})}static \u0275fac=function(e){return new(e||m)};static \u0275cmp=S({type:m,selectors:[["app-admin"]],decls:4,vars:3,consts:[[1,"p-4"],[1,"text-2xl","font-bold","mb-4"],[3,"create","delete","update","animais","loading","saving"]],template:function(e,o){e&1&&(t(0,"div",0)(1,"h1",1),n(2,"Administra\xE7\xE3o de Animais"),i(),t(3,"app-admin-animais",2),c("create",function(u){return o.createAnimal(u)})("delete",function(u){return o.deleteAnimal(u)})("update",function(u){return o.updateAnimal(u)}),i()()),e&2&&(l(3),d("animais",o.animais())("loading",o.loading())("saving",o.saving()))},dependencies:[F,D],encapsulation:2})};export{de as AdminComponent};
