<form [formGroup]="loginForm" (ngSubmit)="submit()" [attr.aria-busy]="isLoading()">
  <div class="max-w-md mx-auto p-6 bg-white rounded shadow">

    <h2 class="text-center text-2xl font-semibold mb-6">Entrar</h2>

    <!-- Email -->
    <div class="mb-4">
      <label for="email" class="block text-sm font-medium mb-1">Email</label>
      <input
        id="email"
        type="email"
        formControlName="adopterEmail"
        class="w-full border rounded px-3 py-2"
        [attr.aria-invalid]="emailControl.invalid && emailControl.touched"
        autocomplete="email"
        required
      />

      @if (emailControl.touched && emailControl.invalid) {
        <p class="text-red-500 text-sm mt-1" role="alert">
          @if (emailControl.errors?.['required']){ O email é obrigatório. }
          @if (emailControl.errors?.['email']) { Insira um email válido (ex: usuario&#64;dominio.com). }
        </p>
      }
    </div>

    <!-- Senha -->
    <div class="mb-4">
      <label for="password" class="block text-sm font-medium mb-1">Senha</label>
      <input
        id="password"
        type="password"
        formControlName="adopterPassword"
        class="w-full border rounded px-3 py-2"
        autocomplete="current-password"
        [attr.aria-invalid]="passwordControl.invalid && passwordControl.touched"
        required
      />

      @if (passwordControl.touched && passwordControl.invalid) {
        <p class="text-red-600 text-sm mt-1">
          @if (passwordControl.errors?.['required']) { A senha é obrigatória. }
          @if (passwordControl.errors?.['minlength']) { A senha deve ter ao menos 6 caracteres. }
        </p>
      }
    </div>

    <!-- Erro da API -->
    @if (errorMessage()) {
      <div role="alert" class="mb-4 text-red-700 bg-red-100 p-3 rounded">
        {{ errorMessage() }}
      </div>
    }

    <div class="flex gap-2 items-center">
      <button
        type="submit"
        class="flex-1 bg-blue-600 text-white py-2 rounded disabled:opacity-60"
        [attr.aria-disabled]="isLoading() || loginForm.invalid"
        [disabled]="isLoading() || loginForm.invalid"
      >
        @if (isLoading()) { Entrando... } @else { Entrar }
      </button>

      <a routerLink="/auth/register" class="text-sm underline text-gray-600">Criar conta</a>
    </div>
  </div>
</form>
