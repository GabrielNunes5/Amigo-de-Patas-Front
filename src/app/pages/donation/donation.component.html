<section class="min-h-screen py-20 bg-gray-50">
    <div class="max-w-5xl mx-auto px-6">
        <div class="text-center mb-14">
            <h1 class="text-4xl font-bold text-gray-900 mb-4">
                Faça uma Doação
            </h1>
            <p class="text-lg text-gray-600 max-w-2xl mx-auto">
                Sua contribuição ajuda na alimentação, tratamentos veterinários,resgates e manutenção da ONG.
            </p>
        </div>
        <div class="grid md:grid-cols-3 gap-6 mb-12">
            <div class="bg-orange-50 border rounded-xl p-6 text-center">
                <p class="text-2xl font-bold text-orange-600">
                    R$10
                </p>
                <p class="text-lg text-gray-600 mt-2 font-semibold">
                    Ração para vários animais
                </p>
            </div>
            <div class="bg-orange-50 border rounded-xl p-6 text-center">
                <p class="text-2xl font-bold text-orange-600">
                    R$25
                </p>
                <p class="text-lg text-gray-600 mt-2 font-semibold">
                    Vacinas e medicamentos
                </p>
            </div>
            <div class="bg-orange-50 border rounded-xl p-6 text-center">
                <p class="text-2xl font-bold text-orange-600">
                    R$50
                </p>
                <p class="text-lg text-gray-600 mt-2 font-semibold">
                    Consultas veterinárias
                </p>
            </div>
        </div>
        <div class="bg-white shadow-2xl rounded-2xl p-10">
            <div class="mb-10">
                <h3 class="text-lg font-semibold mb-4">Escolha o valor</h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                    @for (val of valoresPreset; track val) {
                        <button
                        (click)="selecionarValor(val)"
                        class="py-4 rounded-xl font-bold border transition-all cursor-pointer"
                        [class]="valorClasses(val)">
                        R$ {{ val }}
                        </button>
                    }
                </div>
                <div class="flex gap-3">
                    <button
                        (click)="ativarCustom()"
                        [class]="metodoClasses()"
                        class="w-2/4 md:w-1/4 py-4 rounded-xl border font-bold transition-all cursor-pointer">
                        Outro valor
                    </button>
                    @if (modoCustom()) {
                        <input
                        type="number"
                        min="1"
                        [value]="valorCustom() ?? ''"
                        (input)="atualizarValorCustom($event)"
                        class="p-4 rounded-xl w-2/4 md:w-3/4"
                        placeholder="Digite o valor" />
                    }
                </div>
                @if (valorFinal() > 0) {
                    <div class="bg-green-50 border border-green-200 rounded-lg p-4 text-center mt-6">
                        <p class="text-green-700 font-semibold">
                            Você está doando R$ {{ valorFinal() | number:'1.2-2' }}
                        </p>
                    </div>
                }
            </div>
            <div class="grid grid-cols-2 gap-4 mb-8">
                <button
                (click)="metodo.set('cartao')"
                class="flex flex-col md:flex-row items-center justify-center gap-3 p-4 rounded-xl border-2 font-semibold transition-all cursor-pointer"
                [class]="cartaoClasses()">
                    <lucide-angular 
                    [img]="CreditCard" 
                    class="inline-block w-6 h-6"/>
                    <span>Cartão de Crédito</span>
                </button>
                <button
                (click)="metodo.set('pix')"
                class="flex flex-col md:flex-row items-center justify-center gap-3 p-4 rounded-xl border-2 font-semibold transition-all cursor-pointer"
                [class]="pixClasses()">
                    <lucide-angular 
                    [img]="BankNote" 
                    class="inline-block w-6 h-6"/>
                    <span>PIX</span>
                </button>
            </div>
            @if (metodo() === 'cartao') {
                <div class="space-y-6">
                    <div class="bg-blue-50 p-4 rounded-lg text-blue-700 text-sm text-center">
                        <p>
                            Você será redirecionado para a página segura da Stripe para concluir o pagamento com cartão.
                        </p>
                    </div>
                <button
                (click)="submit()"
                [disabled]="valorFinal() <= 0 || loading()"
                class="w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white font-bold py-4 rounded-full text-lg disabled:opacity-60 disabled:cursor-not-allowed flex items-center justify-center gap-3">
                    @if (loading()) {
                        <span class="flex items-center justify-center gap-2">
                            <span class="inline-block w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin"></span>
                            <span>Redirecionando</span>
                        </span>
                    } @else {
                        Doar R$ {{ valorFinal() | number:'1.2-2' }} com Cartão
                    }
                    </button>
                </div>
            }
            @if (metodo() === 'pix') {
                <div class="space-y-6">
                    <div class="flex flex-col md:flex-row items-center gap-8">
                        <div class="w-56 h-56 border-4 border-green-400 rounded-2xl overflow-hidden">
                            <img 
                            src="https://i.ibb.co/xSbThDSV/Untitled.png" 
                            alt="QR Code PIX" 
                            class="w-full h-full object-cover" />
                        </div>
                        <div class="flex-1 space-y-4">
                            <div>
                                <p class="font-semibold mb-2">
                                    Chave PIX
                                </p>
                                <div class="bg-gray-50 border rounded-lg px-4 py-3 font-mono text-sm">
                                    <p>
                                        contato&#64;amigodepatas.org.br
                                    </p>
                                </div>
                            </div>
                            <div class="bg-green-50 border border-green-200 rounded-lg p-4 text-sm">
                                <p class="font-semibold mb-2">
                                    Como pagar:
                                </p>
                                <ol class="list-decimal list-inside space-y-1">
                                    <li>
                                        Abra o aplicativo do seu banco
                                    </li>
                                    <li>
                                        Escolha a opção PIX
                                    </li>
                                    <li>
                                        Escaneie o QR Code
                                    </li>
                                    <li>
                                        Confirme o valor de R$ {{ valorFinal() | number:'1.2-2' }}
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</section>